{% extends "base.html" %}
{% load static %}

{% block title %} Panel Administrador {% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}">
<link rel="stylesheet" href="{% static 'css/style_head.css' %}">
{% endblock %}

{% block content %} 
    
<body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">

    <div class="container">
        <section class="header">
            <nav>
                <div class="nav-links">
                    <ul>
                        <li><a href="{% url 'turno' %}">TURNO</a></li>
                        <li><a href="{% url 'creacion_empleado' %}">EMPLEADO</a></li>
                </div>
            </nav>
        </section>
    </div> 
    

    <section class="site-section" id="contact-section">
        <div class="container">
            <div class="row mb-5">
        </div>
        <div class="row">
            <div class="col-md-12 mb-5">
    
    
        <form action="#" class="p-5 bg-white" method = 'POST'>
            
            {% csrf_token %}    
        <h2 class="h4 mb-5">Creacion Turno</h2> 

        <div class="row form-group">
            <div class="col-md-6 mb-3 mb-md-0">
                <label class="text-black" for="lbl-id-estacion">ID Estación</label>
                <input type="text" id="input-id-estacion" class="form-control" name="id-estacion">
            </div>
    
            <div class="col-md-6">
                <label class="text-black" for="lbl-id-casilla">ID Casilla</label>
                <select class="form-control" id="input-id-casilla" name="select-casilla-id">
                    <option class="form-control">Seleccione una opción:</option>
                    {% for i in casillas %}
                        <option value="{{i.id}}" class="form-control" data-estacion="{{i.estacion.id}}">Casilla N°{{i.num_casilla}} de la Estacion N° {{i.estacion_id}}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    
        <div class="row form-group">
            <div class="col-md-6">
                <label class="text-black" for="lbl-id-casilla">ID Operador</label>
                <select class="form-control" id="input-id-casilla" name="select-casilla-id">
                    <option class="form-control">Seleccione una opción:</option>
                    {% for i in operadores %}
                        <option value="{{i.id}}">ID{{i.id}} [{{i.nombre}} {{i.apellido}}]</option>
                    {% endfor %}
                </select>
            </div>
        </div>
    
    
    <div class="row form-group">
        <div class="col-md-12">
        <label class="text-black" for="lbl-start-time">Hora Inicio:</label> 
        <input type="datetime-local" id="start-time" class="form-control" name = "fh-incio">
        </div>
    </div>
    
    <div class="row form-group">
        <div class="col-md-12">
        <label class="text-black" for="lbl-end-time">Hora Fin:</label> 
        <input type="datetime-local" id="end-time" class="form-control" name="fh-fin">
        </div>
    </div>
    
    
        <div class="row form-group">
    
        <div class="col-md-12">
            <label class="text-black" for="lbl-monto">Monto inicial:</label> 
            <input type="text" id="input-monto" class="form-control" name="monto-inicial">
        </div>
    </div>
    
        <div class="row form-group">
    
        <div class="col-md-12">
            <label class="text-black" for="lbl-direction">Sentido cobro:</label> 
            <select name="direccion" id="input-direction" class="form-control">
    
            <option value="Oeste-Este">Oeste-Este</option>
            <option value="Este-Oeste">Este-Oeste</option>
            <option value="Norte-Sur">Norte-Sur</option>
            <option value="Sur-Norte">Sur-Norte</option> 
    
            </select>
    
        </div>
        </div>
    
    
        <div class="row form-group">
            <div class="col-md-12 text-center">
                <input type="submit" value="Ingresar Turno" class="btn btn-primary btn-md text-white">
            </div>
        </div>
    
    
            </form>

            <script>
                const inputIdEstacion = document.getElementById("input-id-estacion");
                const selectCasilla = document.getElementById("input-id-casilla");
                const casillaOptions = [...selectCasilla];
                console.log(casillaOptions)
                        
                inputIdEstacion.addEventListener("change", function () {
                    const selectedIdEstacion = inputIdEstacion.value;
                            
                
                
                    casillaOptions.forEach(option => {
                        option.style.display = "";
                    });
                    
            
                
                    if (selectedIdEstacion) {
                        casillaOptions.forEach(option => {
                            const estacionId = option.getAttribute("data-estacion");
                            if (estacionId !== selectedIdEstacion) {
                                option.style.display = "none";
                            }
                        });
                        }
                });
            </script>
            
            </div>
    
        </div>
        </div>
    </section>
    
        </div> 
    
    
    
    </body>
    
{% endblock %}